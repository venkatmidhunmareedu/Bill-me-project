<%- include('header') %>
<section class="content">
    <div class="container-fluid">
        <div class="row" style="align-content: center;">
            <div class="col-sm-4 col-lg-4 col-md-4"></div>
            <div class="col-sm-4 col-lg-4 col-md-4 ">
                <br><br><br>
                <div class="text-center">
                    <h1><i class="fa-solid fa-rectangle-list mr-1"></i>Todo</h1>
                </div>
                <br><br>
                <form action="/todo/<%= userdetails.username %>" method="post">
                    <div class="input-group">
                        <input type="text" class="form-control" placeholder="Enter the task here..." name="task">
                        <div class="input-group-prepend">
                            <button class="btn btn-dark" type="submit">
                                <i class="fa-solid fa-plus"></i>
                            </button>
                        </div>
                    </div>
                </form>
                <br><br>
                <table class="table">
                    <thead>
                      <tr>
                        <th scope="col">Task</th>
                        <th scope="col">Status</th>
                        <th scope="col">Delete</th>
                      </tr>
                    </thead>
                    <tbody>
                        <% for (var i=todoList.length-1; i>= 0; i--){ %>
                            <tr class="alert <% if(todoList[i].status === true) { %> alert-info line<% } else { %> alert-danger <% } %>">
                                <td ><%= todoList[i].task %></td>
                                <td>
                                    <form action="/todo/update/<%= userdetails.username %>" method="post">
                                        <button class="btn btn-dark btn-sm" name="status" value="<%= todoList[i]._id.toString() %>">
                                            <% if(todoList[i].status === true){ %> <i class="fa-solid fa-circle-check"></i> <% } else { %> <i class="fa-solid fa-circle-xmark"></i> <% } %> </button>
                                    </form>
                                </td>
                                <td>
                                    <form action="/todo/del/<%= userdetails.username %>" method="post">
                                        <button class="btn btn-dark btn-sm" name = "del" value="<%= todoList[i]._id.toString() %>"><i class="fa-regular fa-trash-can"></i></button>
                                    </form>
                                </td>
                            </tr>
                        <% } %>
                    </tbody>
                  </table>
            </div>

            <div class="col-sm-4 col-lg-4 col-md-4"></div>
        </div>
    </div>
</section>

<%- include("footer") %>
